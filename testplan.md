# Test Plan: SwiftGuard (Serialized Delivery)

## 1. Introduction
This document outlines the testing strategy for **SwiftGuard**, focusing on specific banking compliance validation (MT103) and serialized code delivery.

- **Execution Status**: All tests implemented and passed (BTC001-BTC008).
- **Test Framework**: Playwright + Ajv + Google Gemini LLM
- **Last Updated**: 2026-01-01

## 2. Test Coverage & Commit Strategy

The following table maps test cases to their specific implementation commits, ensuring serialized code delivery.

| Test ID | Description | Status | Commit |
| :--- | :--- | :--- | :--- |
| **BTC001** | Valid MT103 Acceptance | ✅ Passed | `feat: valid MT103 acceptance test (BTC001)` |
| **BTC002** | Mandatory Tag Check (:20:, :32A:) | ✅ Passed | `feat: mandatory tag validation (BTC002)` |
| **BTC003** | Duplicate Reference Check | ✅ Passed | `feat: duplicate reference validation (BTC003)` |
| **BTC004** | AML Sanction Screening | ✅ Passed | `feat: AML sanction screening (BTC004)` |
| **BTC005** | Replay Attack Prevention | ✅ Passed | `feat: Fraud Prevention - Replay Attack (BTC005)` |
| **BTC006** | RBI Cut-Off Time Handling | ✅ Passed | `feat: RBI cut-off time handling (BTC006)` |
| **BTC007** | Audit Trail & Traceability | ✅ Passed | `feat: Audit trail and system resilience (BTC007, BTC008)` |
| **BTC008** | System Resilience (Garbage Data) | ✅ Passed | `feat: Audit trail and system resilience (BTC007, BTC008)` |

## 3. Test Scenarios Detail

### 3.1. BTC001: Valid Acceptance
- **Goal**: Verify system accepts a perfectly formed MT103.
- **Input**: Valid MT103 generated by Gemini LLM.
- **Expected**: HTTP 200, `status: success`.

### 3.2. BTC002: Mandatory Tags
- **Goal**: Verify rejection if :20: or :32A: is missing.
- **Input**: MT103 without :23B: (Bank Op Code) or :71A: (Details of Charges).
- **Expected**: HTTP 200 (Failed Status), `valid: false`.

### 3.3. BTC003: Duplicate Reference
- **Goal**: Prevent double processing of same Transaction Reference (:20:).
- **Input**: Submit same Valid MT103 twice.
- **Expected**: 1st: Success; 2nd: HTTP 409 Conflict.

### 3.4. BTC004: AML Sanction Screening
- **Goal**: Block transactions involving sanctioned entities/countries.
- **Input**: MT103 involving 'North Korea' or 'Iran'.
- **Expected**: HTTP 403 Forbidden, `status: blocked`.

### 3.5. BTC005: Replay Attack (Idempotency)
- **Goal**: Specific fraud check for rapid re-submission.
- **Input**: Immediate replay of valid payload.
- **Expected**: HTTP 409 Conflict.

### 3.6. BTC006: Cut-Off Time
- **Goal**: Enforce RBI cut-off (17:00).
- **Input**: Valid MT103 with `X-Simulated-Time: 18:30`.
- **Expected**: HTTP 202 Accepted, `status: queued`.

### 3.7. BTC007: Audit Trail
- **Goal**: Ensure every transaction has a unique Trace ID and Timestamp.
- **Input**: Valid MT103.
- **Expected**: Response contains non-null `traceId` and ISO `timestamp`.

### 3.8. BTC008: Resilience
- **Goal**: Handle non-SWIFT garbage input gracefully.
- **Input**: "GARBAGE_DATA_123".
- **Expected**: HTTP 400 Bad Request (Parsing Failed), no crash.
